[{"content":" Unlock to view this content. ## hi ### hugoArticleEncryptor is a hugo article encryption tool! Let's try it. \u003e hugoArticleEncryptor was inspired by the hugo_encryptor project ","description":"8086汇编的基础知识点，参考自王爽汇编","id":4,"section":"asm","tags":["8086汇编"],"title":"8086汇编","uri":"https://ayuxy.github.io/zh/asm/8086/2023-1121-05/"},{"content":"因 zzo 主题的原作者已停止更新，所以本文主要记录 zzo 主题的修复以及一些优化。由于不擅长前端，所以部分修复和优化代码可能存在一些问题\nUnlock to view this content. ## 添加自定义CSS文件 修改 params.toml 文件，如下： ```toml custom_css = [\"scss/_custom.scss\"] ``` 在 assets/scss 下新建 _custom.scss 文件 ## 优化TOC 当 tocPosition = \"outer\" 时，如下，对 TOC 位置进行调整 ![image-20231119121701559](image-20231119121701559.png) 在 _custom.scss 文件中添加如下内容 ```SCSS .toc[data-dir=ltr] { padding-left: 1.5rem !important; } ``` 注：如果不想在 _custom.scss 修改，也可以修改 themes\\zzo\\assets\\sass\\components\\\\\\_toc.scss 文件的如下内容 ```scss \u0026[data-dir=\"rtl\"] { padding-right: 0.5rem; } ``` 修改为 ```SCSS \u0026[data-dir=\"rtl\"] { padding-right: 1.5rem; } ``` ## 优化文章内容样式 ### 修改标签 ![image-20231119140637602](image-20231119140637602.png) 在 _custom.scss 添加如下内容： ```SCSS .single__meta{ flex-direction: column !important; align-items: flex-start !important; } ``` ### 修改 blockquote 在 _custom.scss 添加如下内容： ```scss .single__contents[data-dir=ltr] blockquote { margin: 0 0.5rem 1rem 0.5rem !important; padding: 0 0 0 1rem !important; } ``` ### 修改段落间距 在 _custom.scss 添加如下内容： ```scss .single__contents p { margin: 0 0 1rem !important; padding: 0; } ``` ## 修改主页样式 ### 修改间距 ![image-20231119140812400](image-20231119140812400.png) 在 _custom.scss 添加如下内容： ```scss .caption{ margin-top: 0.75rem !important; } .summary-classic__text { margin-top: 0.75rem !important; } ``` ![image-20231119141946106](image-20231119141946106.png) 在 _custom.scss 添加如下内容： ```SCSS .summary-classic:not(:last-child) hr{ margin-bottom: 0.75rem !important; } ``` ### 修改📌位置 修改 layouts/partials/summary/classic.html 里面的如下内容 ```html {{- with .Params.pinned -}}{{ ($.Site.Params.pinIcon | safeHTML) | default \"📌\" }}\u0026nbsp;{{- end -}}{{ .Title }} ``` 修改为如下 ```html {{ .Title }}{{- with .Params.pinned -}}\u0026nbsp;{{ ($.Site.Params.pinIcon | safeHTML) | default \"📌\" }}{{- end -}} ``` ## 修改archive页 修改 layouts/archive/list.html 里面的如下内容： ```html {{ .Content }} ``` 修改为如下 ```html {{ with .Content }} {{ . }} {{ end }} ``` ## 修复英文溢出问题 https://www.runoob.com/w3cnote/css-nowrap-break-word.html ![image-20231119180450709](image-20231119180450709.png) 在 _custom.scss 添加如下内容： ```scss .single__tags{ word-break:break-all !important; } ``` ![image-20231119204939141](image-20231119204939141.png) 在 _custom.scss 添加如下内容： ```scss .list__sidebar[data-dir=ltr]{ word-break:break-all !important; } ``` ![image-20231119203626340](image-20231119203626340.png) 在 _custom.scss 添加如下内容： ```scss .summary-classic__content{ word-break:break-all !important; } ``` ![image-20231119222935597](image-20231119222935597.png) 在 _custom.scss 添加如下内容： ```scss .toc{ word-break:break-all !important; } ``` ![image-20231120092259118](image-20231120092259118.png) 在 _custom.scss 添加如下内容： ```scss .terms__list{ word-break:break-all !important; } ``` ![image-20231120094908404](image-20231120094908404.png) 在 _custom.scss 添加如下内容： ```SCSS .archive__li{ word-break:break-all !important; } ``` ![image-20231120095018955](image-20231120095018955.png) 在 _custom.scss 添加如下内容： ```SCSS .basicflex-column{ word-break:break-all !important; } ``` ## 处理图片问题 a 标签嵌套图片导致整体容器高度变大 ![image-20231120171915476](image-20231120171915476.png) ![image-20231120172112981](image-20231120172112981.png) 修复上面的问题，在 _custom.scss 添加如下内容： ```scss .summary-classic__image[data-ani=true]{ vertical-align: middle; }\t``` 修复后如下： ![image-20231120172003195](image-20231120172003195.png) ![image-20231120172244279](image-20231120172244279.png) 如果使用 svg 图片，且 svg 图片比较小，那么显示如下： ![image-20231120173322830](image-20231120173322830.png) 为了让 svg 图片铺满容器，可以在 _custom.scss 添加如下内容： ```scss .summary-classic__image[data-ani=true]{ width: 100%; height: 100%;\t}\t``` ## 侧边栏修改 ### 修改最近发布文章 ![image-20231121163936995](image-20231121163936995.png) 修改 posts-by-order.html 文件，修改后如下 ```html {{ if ($.Param \"enableSidebarPostsByOrder\" | default false) }} {{ $filteredSections := .Site.Pages }} {{ range $.Param \"notAllowedTypesInHomeSidebar\" }} {{ $filteredSections = (where $filteredSections \"Type\" \"!=\" (lower .)) }} {{ end }} {{ $hasOrder := false }} {{ range first ($.Param \"itemsPerCategory\") ($filteredSections.ByParam \"order\") }} {{ if .Params.order }} {{ $hasOrder = true }} {{ end }} {{ end }} {{ if $hasOrder }} {{ i18n \"posts-by-order\" | default \"TOP POSTS\" }} {{ $orderedSections := (first ($.Param \"itemsPerCategory\") ($filteredSections.ByParam \"order\")) }} {{ range first ($.Param \"itemsPerCategory\") $orderedSections.ByLastmod.Reverse }} {{ if .Params.order }} {{ .Title }} {{ end }} {{ end }}\t{{ end }} {{ end }} ``` 除此之外，还要修改 archetypes/default.md 文件为每篇文章添加上 order : true 参数 通过 params.toml 文件里的 itemsPerCategory = 5 参数来控制最近更新文章的篇数 ## 修改Recently update间距 ![image-20231121202338271](image-20231121202338271.png) 在 _custom.scss 添加如下内容： ```scss .sidebar-recent__title:nth-child(2).p2 { margin-top: 1.5rem; } ``` ## ~~为文章里图片添加边框~~ 在 _custom.scss 添加如下内容： ```scss .single__contents img { border: 1px solid #dfdfdf; } ``` ## 修改摘要 当摘要长度超过2行的时候用省略号表示 ![image-20231122173202863](image-20231122173202863.png) 而当屏幕宽度小于 769 时，摘要超过1行的时候用省略号表示 首先在 _custom.scss 添加如下内容： ```scss .summary-classic__text { overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; } ``` 但是上面的 css 在 Webkit 浏览器内核下有作用，所以为了兼容其它浏览器内核，使用 clamp.js 实现，引入 clamp.js 后，在 _custom.js 下添加如下内容： ```js document.addEventListener('DOMContentLoaded', function() { var paragraphs = document.querySelectorAll('.summary-classic__text.p2'); // 判断屏幕宽度是否小于或等于 769 像素 if (window.matchMedia('(max-width: 769px)').matches) { // 屏幕宽度小于或等于 769px，设置 clamp 为 1 paragraphs.forEach(function(paragraph) { $clamp(paragraph, { clamp: 1, useNativeClamp: false, animate: false }); }); } else { // 屏幕宽度大于 769px，设置 clamp 为 2 paragraphs.forEach(function(paragraph) { $clamp(paragraph, { clamp: 2, useNativeClamp: false, animate: false }); }); } }); ``` ## 修改间距 ![image-20231122205830454](image-20231122205830454.png) ![image-20231122205857022](image-20231122205857022.png) 在 _custom.scss 添加如下内容： ```scss .list__main\u003e .summary__container \u003e .summary-classic:first-child \u003e .summary-classic__flex-box { margin-top: 1.75rem; } .list__header--desc{ padding: 0rem !important; } ``` ## ~~修改手机下首页图片显示效果~~ ![image-20231123170003238](image-20231123170003238.png) 当屏幕宽度小于 769 的时候，不显示图片，在 _custom.js 中添加如下内容： ```js var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; // 如果屏幕宽度小于769，则删除元素 if (screenWidth \u003c 769) { // 获取所有.summary-classic__image-container元素 var elementsToRemove = document.querySelectorAll('.summary-classic__image-container'); // 遍历所有元素并删除它们 elementsToRemove.forEach(function (element) { element.parentNode.removeChild(element); }); ``` ## 修改文章中图片清晰度 参考：https://gohugo.io/templates/render-hooks/ 在 themes\\zzo\\layouts\\\\\\_default\\ 里面新建 _markup\\render-image.html 文件，在里面添加如下内容： ```html ``` 修改前： ![image-20231123171538794](image-20231123171538794.png) 修改后： ![image-20231123171514829](image-20231123171514829.png) ## 修改面包屑溢出 ![image-20231123171852669](image-20231123171852669.png) 添加滑动条，在 _custom.scss 添加如下内容： ```scss .breadcrumb{ overflow-x:auto; } ``` ## 处理 hugo server 警告 ![image-20231123212332689](image-20231123212332689.png) 处理第一个告警，打开 _default/config.toml 文件，删除 [outputs] 下的： ```toml taxonomyTerm = [\"HTML\", \"RSS\", \"SearchIndex\"] ``` 处理第二个告警，修改 _default/languages.toml，修改后文件如下： ```toml [zh] title = \"Ayuxy's Blog\" languageName = \"中文\" weight = 1 contentdir = \"content\" [zh.params] languagedir = \"ltr\" ``` ## 处理 minItemsToShowInTagCloud 参数 minItemsToShowInTagCloud 同时控制了侧边栏中系列、标签、分类中文章的最少数量，如果minItemsToShowInTagCloud=2，那么只有当系列、标签、分类中的文章数量至少为 2 的时候才会显示在侧边栏 ![image-20231124152211998](image-20231124152211998.png) 进行修改，让 minItemsToShowInTagCloud 控制标签，新增 minItemsToShowInCategoriesCloud 控制分类，新增 minItemsToShowInSeriesCloud 控制分类， 修改 layouts/partials/taxonomy/taxonomy-categories.html 里面的 minItemsToShowInTagCloud 为 minItemsToShowInCategoriesCloud 修改 layouts/partials/taxonomy/taxonomy-series.html 里面的 minItemsToShowInTagCloud 为 minItemsToShowInSeriesCloud 同时在 param.toml 添加 ```toml minItemsToShowInSeriesCloud = 5 minItemsToShowInCategoriesCloud = 3 ``` 在系列、标签、分类后面添加上相关的值，也就是配置文件里面 minItemsToShowInSeriesCloud 、 minItemsToShowInTagCloud 、minItemsToShowInCategoriesCloud 的值 ![image-20231124160836736](image-20231124160836736.png) 修改 layouts/partials/taxonomy/taxonomy-series.html 文件，在 {{ i18n \"series\" }} 后面添加上如下： ```html {{ with .Site.Params.minItemsToShowInSeriesCloud }} ({{ . }}) {{ end }} ``` 其它的 taxonomy-categories.html 、taxonomy-tags.html 文件同理 ## 修改文章标题间距 在 _custom.scss 添加如下内容： ```scss .single__contents h2{ margin: 3rem 0 1.5rem !important; } .single__contents h3 { margin: 2rem 0 1.25rem !important; } ``` ## 修改字体 添加 data/font.toml，内容如下： ```toml title_font = \"\\\"LXGWWenKaiScreen\\\", sans-serif\" content_font = \"\\\"LXGWWenKaiScreen\\\", sans-serif\" ``` 添加 assets\\scss\\font.css 文件，内容如下： ```css @font-face { font-family: 'LXGWWenKaiScreen'; src: url('../fonts/LXGWWenKaiScreen.ttf'); font-style: normal; } ``` 最后在 params.toml 文件中引入 font.css ## 修改手机下间距 ![image-20231128072748010](image-20231128072748010.png) 在 _custom.scss 添加如下内容： ```scss @media only screen and (max-width: 769px) { .caption { margin-top: 0.5rem !important; } .summary-classic__text { margin-top: 0.5rem !important; } } ``` ## 手机下允许在单词内换行 ![image-20231128081857088](image-20231128081857088.png) 在 _custom.scss 添加如下内容： ```scss @media only screen and (max-width: 769px) { .single__contents p { word-break: break-all; } } ``` ## 修改 archive 页细节 在 _custom.scss 添加如下内容： ```scss .archive__type { padding-left: 5px; padding-right: 5px;\t} @media only screen and (min-width: 769px) { .archive__meta{ margin-top: 2.5px; } } .archive__key { width: 120px !important; } .archive__meta { min-width: 120px !important; max-width: 120px !important; } .archive__type { max-width: 70px !important; min-width: 70px !important;\t} ``` ![image-20231129202107295](.\\2023-1120-01\\image-20231129202107295.png) ![image-20231129211520293](2023-1120-01/image-20231129211520293.png) ","description":"本文主要记录 zzo 主题的修复以及一些优化","id":5,"section":"hugo","tags":["hugo"],"title":"博客优化","uri":"https://ayuxy.github.io/zh/hugo/2023-1120-01/"}]